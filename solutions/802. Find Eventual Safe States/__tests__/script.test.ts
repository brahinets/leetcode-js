import {eventualSafeNodes} from '../script'

describe('802. Find Eventual Safe States', (): void => {
    it('Zero safe nodes in empty graph ', (): void => {
        expect(eventualSafeNodes([]))
            .toStrictEqual([]);
    });

    it('Zero safe nodes in non empty graph ', (): void => {
        expect(eventualSafeNodes([[1], [0]]))
            .toStrictEqual([]);
    });

    it('Has one safe nodes', (): void => {
        expect(eventualSafeNodes([[1, 2, 3, 4], [1, 2], [3, 4], [0, 4], []]))
            .toStrictEqual([4]);
    });

    it('Has multiple safe nodes', (): void => {
        expect(eventualSafeNodes([[1, 2], [2, 3], [5], [0], [5], [], []]))
            .toStrictEqual([2, 4, 5, 6]);
    });

    it('Has all indirectly safe nodes', (): void => {
        expect(eventualSafeNodes([[], [0, 2, 3, 4], [3], [4], []]))
            .toStrictEqual([0, 1, 2, 3, 4]);
    });

    it('Has some indirectly safe nodes due to loops', (): void => {
        expect(eventualSafeNodes([[2, 3], [2, 3, 4], [3, 4], [], [1]]))
            .toStrictEqual([3]);
    });

    it('Load test. Has many safe nodes', (): void => {
        expect(eventualSafeNodes([[214, 430], [59], [], [216, 230, 269, 339, 493], [59], [94, 138, 394, 431], [156], [325, 398, 450], [], [267, 313, 335, 425, 454, 475], [109, 145, 166, 345, 427, 468], [104, 108, 193, 337, 452], [329, 365, 417, 432, 488], [91, 316, 377, 378, 389], [102, 161, 308, 448, 452], [32, 76, 171, 385, 415, 432], [], [42, 158, 227], [407, 493], [64, 463], [261, 323], [76], [150, 471], [39, 67, 109, 406], [80, 283, 377, 400, 487], [66, 184, 288, 307, 466], [33], [], [120, 277, 278], [164, 250, 271, 276, 459], [358], [80, 183, 196, 224, 225], [258, 267, 274, 476], [92, 98, 427], [179, 280], [], [174, 264, 437, 448], [78, 220, 356, 403, 478, 484], [96, 150, 263, 343, 428], [50, 204, 248, 429, 458], [57, 61, 83, 193, 415, 429], [46, 161, 227, 267, 401, 482], [370], [301], [298, 337, 474], [49, 67, 187, 218, 353], [65, 88, 262, 406], [227, 294, 310], [160, 168, 336], [374], [], [59, 252, 400, 408, 439, 476], [177, 332], [122, 212, 294, 465], [65, 92, 365], [], [250, 304], [142, 207], [116, 125, 386], [], [131, 141, 204], [71, 88, 96, 478], [], [95], [189], [92, 125, 315, 334, 463], [112], [], [], [182, 252, 358, 416, 457], [109], [93, 142, 158, 168, 300], [40, 180, 305], [309, 390], [87, 129, 325, 362, 401, 466], [135, 225, 242, 318], [194, 275, 408], [], [152, 302, 359, 399, 427, 438], [], [42, 379, 397], [114, 317, 351, 456], [214, 237], [87, 114, 216, 241, 267, 472], [91, 111, 273, 446], [65, 278, 309], [], [112, 167, 352, 361, 423], [173, 193, 213, 276, 390], [154, 276, 422, 433], [286, 337, 354, 448, 481], [121, 244, 335, 469], [46, 276, 328], [292, 295, 325, 350, 455], [218, 497], [136, 145, 288, 338, 410, 494], [133, 167, 214, 486], [], [114, 196, 199, 339, 417], [220, 266, 349, 360, 382, 493], [], [84, 119, 422, 463], [339, 437], [], [279, 434, 443, 486], [172, 211, 230, 318, 457], [28], [233, 430, 454], [152, 248, 301, 319, 428], [115, 206, 216], [212, 402], [], [148, 224, 253, 408, 409, 485], [], [125, 173, 304], [142, 236, 295, 377, 471], [273, 342, 392, 416, 460], [], [208], [207], [], [158, 225, 426], [154, 376, 408, 413, 477], [126, 137, 193, 253, 387], [], [388], [149, 321, 327, 381], [147, 260, 292, 321, 421], [163, 200, 206, 240, 422], [233, 333, 350, 374, 433], [], [183, 242, 393], [157, 229, 346, 406, 471], [182, 218, 290, 292, 375], [182, 389, 431, 480], [164, 231, 435], [161, 166, 287, 360, 384], [165, 198, 217, 228, 249, 437], [145, 158, 233, 246, 379], [201, 320, 338, 403, 409, 446], [211, 221, 377], [248, 409, 416, 439, 447], [414], [61, 162, 220, 260, 267, 410, 441], [147, 225, 269, 353, 430, 454], [196, 256, 299, 344, 374, 492], [221, 315, 478], [], [210, 273, 348, 421, 429], [164, 285, 316, 445], [161, 381, 407], [299, 311, 337, 418], [407], [231], [], [168, 265, 296, 334, 346, 441], [185, 260, 480], [204, 469], [185, 262, 299, 476], [337, 363, 433], [210, 235, 390, 461, 490], [206], [], [], [], [], [419, 461], [227, 231, 264, 351, 383], [181, 194, 213, 235, 304, 396], [221, 252], [225, 319, 356, 370], [181, 324, 415], [248], [382], [268], [243], [89, 198, 212, 232, 246, 459, 494], [264, 402, 418, 423], [368, 479], [279], [96, 275, 301, 321, 353, 357], [372], [206, 471], [188, 209, 214, 231, 402, 436], [185, 189, 385, 414, 427], [260, 306, 323, 365, 436, 475], [270, 320, 494], [], [435], [194, 306, 345, 368, 474], [375, 424], [205, 220, 365, 378, 438, 492], [209, 348, 403, 455], [221, 305, 353, 450], [], [205, 256, 452], [199, 211, 325, 435, 490], [234, 278, 326, 435], [255, 410, 446], [296, 311, 418, 494], [274, 275, 295, 359, 413, 452], [228, 277, 330, 371, 399, 489], [206, 490], [], [420], [], [203, 334], [219, 360, 404], [355], [333, 458], [], [397, 442, 446], [], [236, 302, 309, 408, 450, 455], [315], [430], [308, 334, 352, 377, 421, 444], [230, 281, 325, 329, 350, 368], [329, 352, 371, 451, 493], [239, 320, 362, 396, 408], [], [261, 370], [223, 251, 272, 282, 461], [343, 366, 395, 448, 466, 489], [378, 470, 493], [289, 290], [], [255, 262, 290, 366, 448], [276, 299, 434, 487], [267, 270], [239, 250, 302, 349, 460, 478], [238, 319, 336, 419, 482, 495], [358, 435, 495], [258, 263, 271, 383, 479], [207, 390], [335, 369, 376, 383, 389, 463], [323, 407, 447, 452, 456], [377], [331, 375, 421, 424], [293, 351, 352], [324, 403], [], [480], [], [303], [261, 370, 392, 441], [290, 298, 395, 405, 431, 492], [316, 353, 450, 451, 475], [258, 259, 260, 308, 343, 436], [282, 314, 359, 380, 429, 483], [420, 463], [258, 265, 340, 360, 384, 391], [268], [374], [282, 311], [336], [], [443], [442], [333, 362, 491], [275, 277, 390, 451, 475], [355], [265, 355, 356, 359, 431, 491], [289, 290, 432, 449], [272, 333, 339, 369, 419, 422], [348, 414], [277, 324, 459, 497], [271, 298, 422], [], [282, 326, 345, 388], [310, 406, 451], [292, 298, 421], [288, 333, 357, 359, 421, 439], [292, 348, 409, 460], [347, 352, 361, 381, 435], [473], [389, 407, 423, 477], [317, 349, 374, 400, 406, 408], [58, 373, 392, 442, 497], [288, 492], [401, 428, 468], [295, 372, 420, 454, 462], [302, 306, 337, 368, 390, 495], [335, 339], [], [316, 379], [302, 333, 387, 404, 412, 454], [302, 328, 455, 464, 490], [326, 372, 463, 469], [], [306, 314, 414], [307, 323, 448, 468, 477, 489], [437, 459], [379, 392, 404, 435, 449, 468], [348, 395, 397, 451, 455], [302, 379, 407, 409, 418], [455], [416], [418, 450], [333], [], [324, 334, 417, 418], [313, 391, 474], [466], [378, 392, 399, 438], [363, 373, 453, 455], [317, 341, 396, 431, 460], [357], [414, 428], [323, 450], [356, 373, 374, 449], [442, 452], [406], [], [456], [], [348, 383, 447, 467], [341, 374, 420, 475], [341, 392, 410, 446], [], [321, 347, 370, 465, 497], [], [], [406], [461], [403, 479], [448], [57, 402, 416, 447, 467], [397, 443, 445, 473], [235, 385, 449], [357, 359, 379, 432, 443], [431, 481, 496], [339, 343, 354, 388, 399, 422], [381, 399], [355, 456, 457], [339, 465, 482], [393], [415], [395, 467, 493, 499], [], [], [362, 364, 493], [], [393, 474], [360, 452], [390, 483], [241, 350, 470], [400, 499], [364, 376, 488, 498], [380, 382, 499], [358, 381, 496], [], [], [443], [457, 459, 465], [158, 401, 427, 433, 470], [380, 451], [], [364, 390, 391, 421, 436, 486], [], [370, 393, 417, 464, 480, 491], [109, 402, 416, 430], [403], [365, 372, 404, 422, 458], [431, 492], [388, 410, 414, 461, 486], [], [407, 430, 435], [377, 417, 428, 482], [390, 396, 420, 441], [375, 401, 416, 444, 462, 463], [423, 478], [], [], [383, 401, 427, 453, 494], [455, 473, 495], [437, 441, 450, 468, 471, 489], [385, 430, 472, 475, 491, 497], [381, 397, 414, 452, 485], [427, 443, 451, 457, 481, 492], [], [394, 407, 442, 461, 472], [], [423, 434, 447, 475, 485, 491], [], [], [414, 419, 466], [434, 467, 469, 487, 494, 495], [399, 452, 463, 468, 470], [407, 430, 441, 442, 496], [392, 393, 439, 445, 471], [], [396, 407, 446, 447, 475], [], [397, 483], [419, 430, 456, 457, 464], [457], [416, 424, 430, 435, 477, 497], [410, 435, 438, 474, 478], [417, 438, 444, 449, 472, 499], [435, 447, 469, 489], [435, 461, 488], [447], [424, 442, 460, 470, 486], [411, 413, 439, 480, 483], [424, 444], [429, 434, 438], [], [], [472, 473, 497], [412, 418, 425, 479], [460, 486, 490], [423, 427, 448], [419, 465, 474, 479, 485], [490, 492], [451, 481, 499], [442, 478], [461, 480], [438, 457, 464, 478, 484, 496], [450, 457, 466, 489], [], [], [427, 447, 448, 463, 478, 498], [], [437, 441, 451, 455, 489], [435, 477, 492], [446, 450], [437], [461, 466], [436, 443, 469, 470, 487, 499], [], [469, 475], [457, 477, 481], [437, 476, 482, 491, 492], [448, 456, 462, 465, 476], [436, 438, 449, 454, 477, 496], [450, 462, 484], [445, 447, 453, 474, 485], [474], [471, 475, 477, 490, 493], [445, 489, 495], [442], [], [], [446, 451, 454, 459, 482, 497], [469, 475, 492, 498], [450, 460, 464, 499], [460, 462, 463, 485, 495], [], [497], [464, 480, 490, 493, 498], [462, 463, 465, 479, 489], [465, 469], [459, 460, 464, 470, 474, 486], [455, 485, 491, 494], [478], [462, 463, 468, 479, 484, 491], [466, 468, 477, 478, 492], [461, 475, 476], [482, 495], [463, 481, 483, 485], [462, 471, 477, 491, 493], [468, 470, 473, 475, 496, 497], [483], [468, 490], [479, 480], [471, 475, 478, 495], [470, 473, 476, 495], [469, 474, 483, 484, 492, 494], [471, 476, 477, 486, 495, 496], [481, 485, 499], [477, 479, 486, 489], [473, 475, 488, 493, 497], [485, 488, 492], [475, 479], [487, 494, 498], [482], [480, 490, 493, 494, 495, 497], [479, 494], [], [482, 490, 491, 492, 493, 496], [484, 495], [], [487, 490, 491, 493, 496, 499], [485, 487, 499], [490, 496, 497], [], [], [], [494], [492, 494, 495, 498], [492, 494, 495, 497, 498], [493, 494, 495, 496, 497, 498], [494, 495, 496, 497, 498, 499], [496, 497, 498, 499], [], [498], [175, 498, 499], [499], []]))
            .toStrictEqual([0, 1, 2, 4, 6, 7, 8, 9, 12, 16, 18, 19, 21, 24, 25, 27, 28, 29, 30, 31, 34, 35, 36, 37, 39, 42, 44, 45, 48, 49, 50, 51, 52, 53, 55, 56, 57, 58, 59, 60, 62, 64, 66, 67, 68, 73, 75, 76, 77, 78, 79, 80, 81, 82, 86, 89, 90, 93, 94, 97, 98, 99, 100, 102, 103, 104, 105, 106, 107, 110, 111, 112, 113, 114, 115, 116, 117, 119, 120, 122, 124, 125, 126, 127, 129, 130, 131, 132, 135, 137, 139, 141, 142, 144, 145, 147, 148, 149, 151, 152, 153, 154, 156, 157, 159, 160, 162, 163, 164, 165, 166, 168, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 181, 183, 184, 185, 186, 187, 188, 189, 190, 191, 192, 194, 195, 196, 197, 198, 199, 201, 203, 204, 205, 207, 209, 210, 211, 212, 213, 214, 215, 217, 218, 219, 220, 222, 223, 224, 225, 226, 228, 229, 230, 231, 232, 233, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243, 244, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255, 256, 257, 258, 259, 260, 263, 264, 265, 266, 267, 268, 269, 270, 271, 272, 273, 275, 276, 277, 278, 279, 280, 281, 282, 283, 284, 285, 286, 287, 288, 289, 290, 291, 292, 293, 294, 295, 296, 297, 298, 299, 300, 302, 303, 304, 305, 306, 307, 308, 309, 310, 311, 312, 313, 314, 315, 316, 317, 318, 319, 320, 321, 322, 323, 324, 325, 326, 327, 328, 329, 330, 331, 332, 333, 335, 336, 337, 338, 339, 340, 341, 342, 343, 344, 345, 346, 347, 348, 349, 350, 351, 352, 353, 354, 356, 357, 358, 359, 360, 362, 363, 364, 365, 366, 367, 368, 369, 370, 371, 372, 373, 374, 375, 376, 377, 378, 379, 380, 381, 382, 383, 384, 385, 386, 387, 388, 389, 390, 391, 392, 393, 394, 395, 396, 397, 398, 399, 400, 401, 402, 403, 404, 405, 406, 407, 408, 409, 410, 411, 412, 413, 414, 415, 416, 417, 418, 419, 420, 421, 422, 423, 424, 425, 426, 427, 428, 429, 430, 431, 432, 433, 434, 435, 436, 437, 438, 439, 440, 441, 442, 443, 444, 445, 446, 447, 448, 449, 450, 451, 452, 453, 454, 455, 456, 457, 458, 459, 460, 461, 462, 463, 464, 465, 466, 467, 468, 469, 470, 471, 472, 473, 474, 475, 476, 477, 478, 479, 480, 481, 482, 483, 484, 485, 486, 487, 488, 489, 490, 491, 492, 493, 494, 495, 496, 497, 498, 499]);
    });
});
